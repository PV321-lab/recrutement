<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Test Firebase - Correction Cl√© API</title>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-auth-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.1/firebase-database-compat.js"></script>
    <style>
        body { font-family: Arial, sans-serif; max-width: 800px; margin: 0 auto; padding: 20px; }
        .error { background-color: #ffebee; color: #c62828; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .success { background-color: #e8f5e9; color: #2e7d32; padding: 15px; border-radius: 5px; margin: 20px 0; }
        .config-box { background-color: #f5f5f5; padding: 15px; border-left: 4px solid #2196f3; margin: 20px 0; }
        code { background-color: #eee; padding: 2px 6px; border-radius: 3px; }
        button { background-color: #2196f3; color: white; padding: 10px 20px; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        button:hover { background-color: #1976d2; }
    </style>
</head>
<body>
    <h1>üîß Test Firebase - Probl√®me de Cl√© API</h1>
    
    <div class="error">
        <h3>‚ùå Erreur d√©tect√©e : Cl√© API invalide</h3>
        <p>La cl√© API <code>AIzaSyC6uSDTNCuw5sHNVaNgq0EzJqJZ9jgic7U</code> n'est pas valide.</p>
    </div>
    
    <div class="config-box">
        <h3>üìã √âtapes pour corriger le probl√®me :</h3>
        <ol>
            <li><strong>Connectez-vous √† la console Firebase</strong> : <a href="https://console.firebase.google.com" target="_blank">console.firebase.google.com</a></li>
            <li><strong>S√©lectionnez votre projet</strong> : dddiii-2b58b</li>
            <li><strong>Cliquez sur ‚öôÔ∏è > Param√®tres du projet</strong></li>
            <li><strong>Faites d√©filer √† "Vos applications"</strong></li>
            <li><strong>Cliquez sur votre application web</strong> (ou cr√©ez-en une)</li>
            <li><strong>Copiez la configuration compl√®te</strong></li>
            <li><strong>Collez-la dans le code ci-dessous</strong></li>
        </ol>
    </div>
    
    <h3>üõ† Configuration √† compl√©ter :</h3>
    <div id="firebaseConfig">
        <p>Remplacer ces valeurs par celles de votre console Firebase :</p>
        <pre>
const firebaseConfig = {
    apiKey: "<span id="apiKey">√Ä remplacer</span>",
    authDomain: "<span id="authDomain">√Ä remplacer</span>",
    databaseURL: "<span id="databaseURL">√Ä remplacer</span>",
    projectId: "<span id="projectId">√Ä remplacer</span>",
    storageBucket: "<span id="storageBucket">√Ä remplacer</span>",
    messagingSenderId: "<span id="messagingSenderId">√Ä remplacer</span>",
    appId: "<span id="appId">√Ä remplacer</span>"
};</pre>
    </div>
    
    <button onclick="testFirebase()">Tester la connexion Firebase</button>
    <div id="testResult"></div>
    
    <script>
        // Configuration TEMPORAIRE - √Ä REMPLACER
        let firebaseConfig = {
            apiKey: "AIzaSyC6uSDTNCuw5sHNVaNgq0EzJqJZ9jgic7U", // Cl√© probablement invalide
            authDomain: "dddiii-2b58b.firebaseapp.com",
            databaseURL: "https://dddiii-2b58b-default-rtdb.asia-southeast1.firebasedatabase.app",
            projectId: "dddiii-2b58b",
            storageBucket: "dddiii-2b58b.appspot.com",
            messagingSenderId: "123456789012",
            appId: "1:123456789012:web:a1b2c3d4e5f67890"
        };
        
        async function testFirebase() {
            const resultDiv = document.getElementById('testResult');
            resultDiv.innerHTML = '<p>Test en cours...</p>';
            
            try {
                // Initialiser Firebase
                const app = firebase.initializeApp(firebaseConfig);
                
                // Tester l'authentification
                const auth = firebase.auth();
                resultDiv.innerHTML = '<p class="success">‚úÖ Firebase initialis√© avec succ√®s</p>';
                
                // Essayer de se connecter
                try {
                    await auth.signInWithEmailAndPassword("g.marouane@outlook.fe", "M@ra10");
                    resultDiv.innerHTML += '<p class="success">‚úÖ Authentification r√©ussie</p>';
                    
                    // Tester la base de donn√©es
                    const database = firebase.database();
                    const snapshot = await database.ref().limitToFirst(1).get();
                    
                    if (snapshot.exists()) {
                        resultDiv.innerHTML += '<p class="success">‚úÖ Connexion √† la base de donn√©es r√©ussie</p>';
                        resultDiv.innerHTML += `<pre>Donn√©es: ${JSON.stringify(snapshot.val(), null, 2)}</pre>`;
                    } else {
                        resultDiv.innerHTML += '<p class="success">‚úÖ Base de donn√©es accessible (mais vide)</p>';
                    }
                    
                } catch (authError) {
                    resultDiv.innerHTML += `<p class="error">‚ùå Erreur d'authentification: ${authError.message}</p>`;
                    resultDiv.innerHTML += '<p>V√©rifiez que l\'utilisateur existe dans Firebase Authentication</p>';
                }
                
            } catch (initError) {
                resultDiv.innerHTML = `<div class="error">
                    <h3>‚ùå Erreur d'initialisation Firebase</h3>
                    <p><strong>Message:</strong> ${initError.message}</p>
                    <p><strong>Code:</strong> ${initError.code || 'N/A'}</p>
                    <p><strong>Solution:</strong> V√©rifiez votre configuration Firebase dans la console.</p>
                    <p>La cl√© API semble invalide. V√©rifiez:</p>
                    <ul>
                        <li>Que la cl√© API est correcte</li>
                        <li>Que les restrictions de cl√© autorisent votre domaine</li>
                        <li>Que l'API Firebase Authentication est activ√©e</li>
                    </ul>
                </div>`;
            }
        }
        
        // Instructions d√©taill√©es
        console.log(`
        ========================================
        INSTRUCTIONS POUR CORRIGER LA CL√â API :
        ========================================
        1. Allez sur: https://console.firebase.google.com
        2. S√©lectionnez le projet: dddiii-2b58b
        3. Cliquez sur ‚öôÔ∏è > Param√®tres du projet
        4. Faites d√©filer √† "Vos applications"
        5. Cliquez sur l'ic√¥ne "</>" (Application web)
        6. Copiez TOUT l'objet de configuration
        7. Remplacez firebaseConfig dans ce code
        
        Si aucune application n'existe:
        1. Cliquez sur "Ajouter une application"
        2. S√©lectionnez "</>" Web
        3. Donnez un nom √† votre application
        4. Cliquez sur "Enregistrer l'application"
        5. Copiez la configuration
        `);
    </script>
</body>
</html>